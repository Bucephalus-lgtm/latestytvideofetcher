{
  "version": 3,
  "sources": ["../resolvers.ts"],
  "sourcesContent": ["import Video from './models/Video'\nimport { Op } from 'sequelize'\n\nconst resolvers = {\n  Query: {\n    videos: async (_, { offset, limit }) => {\n      const results = await Video.findAndCountAll({\n        limit,\n        offset,\n      })\n\n      return results.rows\n    },\n    countVideos: async () => await Video.count(),\n    searchByTitle: async (_, { title }) => await Video.findAll({ where: { title: { [Op.like]: `%${title}%` } } }),\n    searchByDescription: async (_, { description }) => await Video.findAll({ where: { description: { [Op.like]: `%${description}%` } } })\n  },\n  Mutation: {\n    addVideo: async (_, { videoNew }) => {\n      const totalVideos = await Video.count();\n      console.log({ totalVideos });\n      if (totalVideos > 500) {\n        await Video.destroy({\n          where: {},\n          truncate: true\n        });\n      }\n      return await Video.create(videoNew)\n    }\n  }\n}\n\nexport default resolvers; "],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,uBAAmB;AAEnB,MAAM,YAAY;AAAA,EAChB,OAAO;AAAA,IACL,QAAQ,OAAO,GAAG,EAAE,QAAQ,MAAM,MAAM;AACtC,YAAM,UAAU,MAAM,aAAAA,QAAM,gBAAgB;AAAA,QAC1C;AAAA,QACA;AAAA,MACF,CAAC;AAED,aAAO,QAAQ;AAAA,IACjB;AAAA,IACA,aAAa,YAAY,MAAM,aAAAA,QAAM,MAAM;AAAA,IAC3C,eAAe,OAAO,GAAG,EAAE,MAAM,MAAM,MAAM,aAAAA,QAAM,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,oBAAG,OAAO,IAAI,SAAS,EAAE,EAAE,CAAC;AAAA,IAC5G,qBAAqB,OAAO,GAAG,EAAE,YAAY,MAAM,MAAM,aAAAA,QAAM,QAAQ,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC,oBAAG,OAAO,IAAI,eAAe,EAAE,EAAE,CAAC;AAAA,EACtI;AAAA,EACA,UAAU;AAAA,IACR,UAAU,OAAO,GAAG,EAAE,SAAS,MAAM;AACnC,YAAM,cAAc,MAAM,aAAAA,QAAM,MAAM;AACtC,cAAQ,IAAI,EAAE,YAAY,CAAC;AAC3B,UAAI,cAAc,KAAK;AACrB,cAAM,aAAAA,QAAM,QAAQ;AAAA,UAClB,OAAO,CAAC;AAAA,UACR,UAAU;AAAA,QACZ,CAAC;AAAA,MACH;AACA,aAAO,MAAM,aAAAA,QAAM,OAAO,QAAQ;AAAA,IACpC;AAAA,EACF;AACF;AAEA,IAAO,oBAAQ;",
  "names": ["Video"]
}
